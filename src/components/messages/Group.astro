---
import Avatar from './Avatar.astro'
import Message from './Message.astro'

interface Props {
  messages: string[]
  avatar?: string
  status?: string
  reversed?: boolean
}

const { messages, avatar, status, reversed } = Astro.props
---

<style lang="scss">
  section {
    max-width: 86.5%;

    & > div {
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      flex-wrap: nowrap;
      column-gap: 1rem;
    }
  }

  .list {
    display: flex;
    row-gap: 0.25rem;
    flex-direction: column;
    width: 100%;
  }

  .reversed {
    align-self: flex-end;

    & p {
      text-align: right;
    }

    & .list {
      align-items: flex-end;
    }
  }

  p {
    display: block;
    font-size: 0.85rem;
    letter-spacing: 0.015em;
    margin-top: 0.25rem;
    margin-left: 3rem;
    margin-right: 0.1rem;
    font-weight: 400;
    opacity: 0.45;
  }
</style>

<section class:list={[{ reversed }]}>
  <div>
    {avatar && <Avatar src={avatar} />}
    <div class="list">
      {messages?.map((message) => <Message content={message} reversed={reversed} />)}
    </div>
  </div>
  {status && <p>{status}</p>}
</section>
